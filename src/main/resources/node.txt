Các bảng dữ liệu và mối quan hệ
Users (Người dùng)
Expenses (Chi tiêu)
ExpenseDetails (Chi tiết chi tiêu)
Incomes (Khoản thu)
IncomeDetails (Chi tiết khoản thu)
Balance (Tổng tiền còn lại hoặc nợ)
Posts (Bài đăng)
Comments (Bình luận)
Follows (Theo dõi)
Favorites (Yêu thích)
Admins (Quản trị viên)

Mối quan hệ giữa các bảng:
Users:
Users có thể có nhiều Expenses: Quan hệ 1-n
Users có thể có nhiều Incomes: Quan hệ 1-n
Users có thể viết nhiều Posts: Quan hệ 1-n
Users có thể viết nhiều Comments: Quan hệ 1-n

Posts:
Posts thuộc về một User: Quan hệ n-1
Posts có thể có nhiều Comments: Quan hệ 1-n

Comments:
Comments thuộc về một Post: Quan hệ n-1
Comments thuộc về một User: Quan hệ n-1

Posts (Bài viết):
Posts có thể có nhiều Favorites (1-n)

Users (Người dùng):
Users có thể có nhiều lượt Follows (1-n)
Users có thể có nhiều Favorites (1-n)

Follows (Theo dõi):
Mỗi bản ghi trong Follows là một mối quan hệ theo dõi giữa hai người dùng:
follower_id: ID của người theo dõi (Foreign Key đến Users)
followed_id: ID của người được theo dõi (Foreign Key đến Users)

Favorites (Yêu thích):
Mỗi bản ghi trong Favorites là một mối quan hệ yêu thích giữa một người dùng và một bài viết:
user_id: ID của người dùng (Foreign Key đến Users)
post_id: ID của bài viết được yêu thích (Foreign Key đến Posts)

Follows (Theo dõi):
Mỗi bản ghi trong Follows là một mối quan hệ theo dõi giữa hai người dùng:
follower_id: ID của người theo dõi (Foreign Key đến Users)
followed_id: ID của người được theo dõi (Foreign Key đến Users)

Favorites (Yêu thích):
Mỗi bản ghi trong Favorites là một mối quan hệ yêu thích giữa một người dùng và một bài viết:
user_id: ID của người dùng (Foreign Key đến Users)
post_id: ID của bài viết được yêu thích (Foreign Key đến Posts)

Admins:
Admins quản lý tất cả các thông tin người dùng và bài đăng, nhưng không có quan hệ trực tiếp trong thiết kế cơ sở dữ liệu này.

Bảng Posts:
sql
Sao chép mã
CREATE TABLE Posts (
    post_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT,
    title VARCHAR(255) NOT NULL,
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES Users(user_id)
);
Bảng Comments:
sql
Sao chép mã
CREATE TABLE Comments (
    comment_id INT PRIMARY KEY AUTO_INCREMENT,
    post_id INT,
    user_id INT,
    content TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (post_id) REFERENCES Posts(post_id),
    FOREIGN KEY (user_id) REFERENCES Users(user_id)
);

Tóm tắt mối quan hệ:
User - Expenses: 1-n
User - Incomes: 1-n
User - Posts: 1-n
User - Comments: 1-n
Expenses - ExpenseDetails: 1-n
Incomes - IncomeDetails: 1-n
Post - Comments: 1-n

Test trên postman phần khoản chi:
Lấy danh sách tất cả Khoanchi:
Phương thức: GET
URL: http://localhost:8080/cackhoanchi

Lấy một Khoanchi theo ID
Phương thức: GET
URL: http://localhost:8080/timkhoanchi/{1}

Phương thức: POST
URL: http://localhost:8080/api/khoanchi
Body: Chọn raw, định dạng JSON, và nhập dữ liệu của khoản chi mới. Ví dụ:
{
    "tongchi": 500000
}

Xóa một Khoanchi theo ID
Phương thức: DELETE
URL: http://localhost:8080/api/xoakhoanchi/{1}

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-06-15T20:21:43.672+07:00 ERROR 10396 --- [SpendingManagementApplication] [  restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Association 'com.project.SpendingManagementApplication.entity.CTKhoanchi.idkhoanchi' is 'mappedBy' a property named 'idctchi' of the target entity type 'com.project.SpendingManagementApplication.entity.CTKhoanchi' which is not a '@OneToOne' or '@ManyToOne' association
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.8.jar:6.1.8]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.8.jar:6.1.8]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.8.jar:6.1.8]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.8.jar:6.1.8]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.8.jar:6.1.8]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.8.jar:6.1.8]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.8.jar:6.1.8]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.8.jar:6.1.8]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.8.jar:6.1.8]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.0.jar:3.3.0]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.0.jar:3.3.0]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.0.jar:3.3.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.0.jar:3.3.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.0.jar:3.3.0]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.0.jar:3.3.0]
	at com.project.SpendingManagementApplication.SpendingManagementApplication.main(SpendingManagementApplication.java:10) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:104) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:578) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.0.jar:3.3.0]
Caused by: org.hibernate.AnnotationException: Association 'com.project.SpendingManagementApplication.entity.CTKhoanchi.idkhoanchi' is 'mappedBy' a property named 'idctchi' of the target entity type 'com.project.SpendingManagementApplication.entity.CTKhoanchi' which is not a '@OneToOne' or '@ManyToOne' association
	at org.hibernate.boot.model.internal.OneToOneSecondPass.bindUnowned(OneToOneSecondPass.java:156) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.model.internal.OneToOneSecondPass.doSecondPass(OneToOneSecondPass.java:128) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1811) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1770) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:334) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1431) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1502) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.8.jar:6.1.8]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390) ~[spring-orm-6.1.8.jar:6.1.8]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.8.jar:6.1.8]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.8.jar:6.1.8]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366) ~[spring-orm-6.1.8.jar:6.1.8]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.8.jar:6.1.8]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.8.jar:6.1.8]
	... 18 common frames omitted
